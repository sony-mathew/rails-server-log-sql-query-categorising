<!DOCTYPE html>

<head>
	<title> Rails Query Analyser </title>
	<script src="./js/simpleSqlParser.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
	<!-- <script src="./js/angular.js"></script> -->
	<script src="./js/controllers.js"></script>
	<link rel="stylesheet" href="./styles/style.css">
</head>

<body ng-app="queryAnalysisApp">
	<header>
		Rails Query {{'Analyz' + 'er'}}
	</header>
	<nav>
	</nav>

	<section id="log-input" ng-controller="LogInput as logi" ng-hide="logi.hide">
		<p>
			Input the log : <br/>
			<textarea name="log_input" class="log_input" ng-model="logi.railsLog"> </textarea> <br/>
			<input type="submit" name="submit" value="submit" ng-click="logi.getLog()">
		</p>
	</section>


	<section id="log-analysis" ng-controller="LogAnalysis as loga">
		<p ng-hide="!loga.tables()">
			<span>
				Select table : 
				<select id="mysql-table" name="mysql_table" ng-change="loga.selectTable()" ng-model="loga.mysqlTable">
					<option ng-repeat="table in loga.tables()">{{ table }}</option>
				</select>
			</span>
			<span ng-hide="!loga.queryTypes()">
				Select query type :
				<select id="query-type" name="query_type" ng-change="loga.selectQueryType()" ng-model="loga.tableQueryType">
					<option ng-repeat="type in loga.queryTypes()">{{ type }}</option>
				</select>
			</span>

			<div class="listing">
				<p ng-repeat="query in loga.listQ() track by $index"> 
					{{ $index + 1}} . {{ query }} 
				</p>
			</div>
		</p>
	</section>

</body>
<!-- <script src="query_analysis.js"></script> -->
</html>